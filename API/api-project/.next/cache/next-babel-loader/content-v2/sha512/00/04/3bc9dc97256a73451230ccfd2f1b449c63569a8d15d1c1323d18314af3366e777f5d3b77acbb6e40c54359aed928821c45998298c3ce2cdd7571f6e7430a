{"ast":null,"code":"import { MongoClient } from \"mongodb\";\n\nconst handler = async (req, res) => {\n  switch (req.method) {\n    case 'POST':\n      const email = req.body.email;\n\n      if (!email || !email.includes('@')) {\n        return res.status(422).json({\n          message: 'Invalid email address'\n        });\n      }\n\n      const client = await MongoClient.connect('mongodb+srv://Me:Long.21700@cluster0.b30e6.mongodb.net/myFirstDatabase?retryWrites=true&w=majority');\n      const db = client.db();\n      await db.collection('emails').insertOne({\n        email: email\n      });\n      client.close();\n      return res.status(201).json({\n        message: 'Signed up'\n      });\n  }\n};\n\nexport default handler;","map":{"version":3,"sources":["D:/Home studying/Courses/NextJs/API/api-project/pages/api/index.js"],"names":["MongoClient","handler","req","res","method","email","body","includes","status","json","message","client","connect","db","collection","insertOne","close"],"mappings":"AAAA,SAASA,WAAT,QAA4B,SAA5B;;AAEA,MAAMC,OAAO,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAChC,UAAQD,GAAG,CAACE,MAAZ;AACI,SAAK,MAAL;AACI,YAAMC,KAAK,GAAGH,GAAG,CAACI,IAAJ,CAASD,KAAvB;;AACA,UAAI,CAACA,KAAD,IAAU,CAACA,KAAK,CAACE,QAAN,CAAe,GAAf,CAAf,EAAoC;AAChC,eAAOJ,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,UAAAA,OAAO,EAAE;AAAX,SAArB,CAAP;AACH;;AAED,YAAMC,MAAM,GAAG,MAAMX,WAAW,CAACY,OAAZ,CAAoB,oGAApB,CAArB;AACA,YAAMC,EAAE,GAAGF,MAAM,CAACE,EAAP,EAAX;AACA,YAAMA,EAAE,CAACC,UAAH,CAAc,QAAd,EAAwBC,SAAxB,CAAkC;AAAEV,QAAAA,KAAK,EAAEA;AAAT,OAAlC,CAAN;AACAM,MAAAA,MAAM,CAACK,KAAP;AACA,aAAOb,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,QAAAA,OAAO,EAAE;AAAX,OAArB,CAAP;AAXR;AAaH,CAdD;;AAgBA,eAAeT,OAAf","sourcesContent":["import { MongoClient } from \"mongodb\"\r\n\r\nconst handler = async (req, res) => {\r\n    switch (req.method) {\r\n        case 'POST':\r\n            const email = req.body.email\r\n            if (!email || !email.includes('@')) {\r\n                return res.status(422).json({ message: 'Invalid email address' })\r\n            }\r\n\r\n            const client = await MongoClient.connect('mongodb+srv://Me:Long.21700@cluster0.b30e6.mongodb.net/myFirstDatabase?retryWrites=true&w=majority')\r\n            const db = client.db()\r\n            await db.collection('emails').insertOne({ email: email })\r\n            client.close()\r\n            return res.status(201).json({ message: 'Signed up' })\r\n    }\r\n}\r\n\r\nexport default handler"]},"metadata":{},"sourceType":"module"}